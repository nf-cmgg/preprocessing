Changes in module 'nf-core/samtools/sort'
--- modules/nf-core/samtools/sort/main.nf
+++ modules/nf-core/samtools/sort/main.nf
@@ -8,8 +8,7 @@
         'biocontainers/samtools:1.19.2--h50ea8bc_0' }"
 
     input:
-    tuple val(meta) , path(bam)
-    tuple val(meta2), path(fasta)
+    tuple val(meta) , path(bam), path(fasta)
 
     output:
     tuple val(meta), path("*.bam"),     emit: bam,  optional: true
@@ -28,6 +27,7 @@
                     args.contains("--output-fmt cram") ? "cram" :
                     "bam"
     def reference = fasta ? "--reference ${fasta}" : ""
+    def sort_memory = (task.memory.mega/task.cpus*0.75).intValue()
     if ("$bam" == "${prefix}.bam") error "Input and output names are the same, use \"task.ext.prefix\" to disambiguate!"
 
     """
@@ -40,6 +40,7 @@
         -T ${prefix} \\
         --threads $task.cpus \\
         ${reference} \\
+        -m ${sort_memory}M \\
         -o ${prefix}.${extension} \\
         -
 

************************************************************
